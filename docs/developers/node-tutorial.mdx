---
sidebar_label: Node API tutorial
description: Find out how to interact with a Celestia Node's RPC (Remote Procedure Call) API to submit and retrieve data from the DA layer.
---

import constants from "../../versions/constants.js";
import arabicaVersions from "../../versions/arabica_versions.js";
import mochaVersions from "../../versions/mocha_versions.js";
import blockspaceraceVersions from "../../versions/blockspacerace_versions.js";

# Getting and sending transactions with Celestia Node's Gateway API

In this tutorial, we will cover how to use the Celestia Node Gateway API to submit and
retrieve messages from the Data Availability Layer by their namespace ID.

This tutorial assumes you are working in a Linux environment.

> To view a video tutorial for setting up a Celestia Light Node, click [here](./light-node-video.md).

## Hardware requirements

The following minimum hardware requirements are recommended for running a light node:

- Memory: **2 GB RAM**
- CPU: **Single Core**
- Disk: **25 GB SSD Storage**
- Bandwidth: **56 Kbps for Download/56 Kbps for Upload**

## Setting up dependencies

First, make sure to update and upgrade the OS:

````mdx-code-block
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<Tabs groupId="operating-systems">
<TabItem value="apt" label="APT">

```sh
sudo apt update && sudo apt upgrade -y
```

</TabItem>
<TabItem value="yum" label="YUM">

```sh
sudo yum update
```

</TabItem>
</Tabs>

These are essential packages that are necessary to execute many tasks like
downloading files, compiling, and monitoring the node:

<Tabs groupId="operating-systems">
<TabItem value="apt" label="APT">

```sh
sudo apt install curl tar wget clang pkg-config libssl-dev jq build-essential git make ncdu -y
```

</TabItem>
<TabItem value="yum" label="YUM">

```sh
sudo yum install curl tar wget clang pkg-config libssl-dev jq build-essential git make ncdu -y
```

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

#### ðŸº Installing Homebrew

[Homebrew](https://brew.sh) is a package manager for macOS and Linux and will
allow you to install your dependencies.

```sh
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

Be sure to run the commands in the output that are similar to:

```sh
==> Next steps:
- Run these three commands in your terminal to add Homebrew to your PATH:
    echo '# Set PATH, MANPATH, etc., for Homebrew.' >> /Users/joshstein/.zprofile
    echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> /Users/joshstein/.zprofile
    eval "$(/opt/homebrew/bin/brew shellenv)"
```

#### ðŸ—„ Install wget and jq

Using Homebrew, in your terminal:

```sh
brew install wget && brew install jq
```

[wget](https://www.gnu.org/software/wget) is an internet file retriever and
[jq](https://stedolan.github.io/jq) is a lightweight command-line JSON
processor.

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

#### ðŸº Installing Homebrew

[Homebrew](https://brew.sh) is a package manager for macOS and Linux and will
allow you to install your dependencies.

```sh
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

Be sure to run the commands in the output that are similar to:

```sh
==> Next steps:
- Run these three commands in your terminal to add Homebrew to your PATH:
    echo '# Set PATH, MANPATH, etc., for Homebrew.' >> /Users/joshstein/.zprofile
    echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> /Users/joshstein/.zprofile
    eval "$(/opt/homebrew/bin/brew shellenv)"
```

#### ðŸ—„ Install wget and jq

Using Homebrew, in your terminal:

```sh
brew install wget && brew install jq
```

[wget](https://www.gnu.org/software/wget) is an internet file retriever and
[jq](https://stedolan.github.io/jq) is a lightweight command-line JSON
processor.

</TabItem>
</Tabs>
````

### Install Golang

`celestia-app` and `celestia-node` are written in [Golang](https://go.dev)
so we must install Golang to build and run them.

````mdx-code-block
<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

<pre><code>
ver="{constants.golangNodeBSR}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.linux-amd64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz"<br/>
rm "go$ver.linux-amd64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

<pre><code>
ver="{constants.golangNodeBSR}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.linux-arm64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.linux-arm64.tar.gz"<br/>
rm "go$ver.linux-arm64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

<pre><code>
ver="{constants.golangNodeBSR}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.darwin-arm64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.darwin-arm64.tar.gz"<br/>
rm "go$ver.darwin-arm64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

<pre><code>
ver="{constants.golangNodeBSR}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.darwin-amd64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.darwin-amd64.tar.gz"<br/>
rm "go$ver.darwin-amd64.tar.gz"<br/>
</code></pre>

</TabItem>
</Tabs>

Now we need to add the `/usr/local/go/bin` directory to `$PATH`:

<Tabs groupId="shell">
<TabItem value="bash" label="bash">

```sh
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.bash_profile
source $HOME/.bash_profile
```

</TabItem>
<TabItem value="zsh" label="zsh">

```zsh
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.zshrc
source $HOME/.zshrc
```

</TabItem>
</Tabs>

To check if Go was installed correctly run:

```sh
go version
```

The output should be the version installed:

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

<pre><code>
go version go{constants.golangNodeBSR} linux/amd64
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

<pre><code>
go version go{constants.golangNodeBSR} linux/arm64
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

<pre><code>
go version go{constants.golangNodeBSR} darwin/arm64
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

<pre><code>
go version go{constants.golangNodeBSR} darwin/amd64
</code></pre>

</TabItem>
</Tabs>

</TabItem>
<TabItem value="mocha" label="Mocha">

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

<pre><code>
ver="{constants.golangNodeMocha}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.linux-amd64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz"<br/>
rm "go$ver.linux-amd64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

<pre><code>
ver="{constants.golangNodeMocha}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.linux-arm64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.linux-arm64.tar.gz"<br/>
rm "go$ver.linux-arm64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

<pre><code>
ver="{constants.golangNodeMocha}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.darwin-arm64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.darwin-arm64.tar.gz"<br/>
rm "go$ver.darwin-arm64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

<pre><code>
ver="{constants.golangNodeMocha}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.darwin-amd64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.darwin-amd64.tar.gz"<br/>
rm "go$ver.darwin-amd64.tar.gz"<br/>
</code></pre>

</TabItem>
</Tabs>

Now we need to add the `/usr/local/go/bin` directory to `$PATH`:

<Tabs groupId="shell">
<TabItem value="bash" label="bash">

```sh
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.bash_profile
source $HOME/.bash_profile
```

</TabItem>
<TabItem value="zsh" label="zsh">

```zsh
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.zshrc
source $HOME/.zshrc
```

</TabItem>
</Tabs>

To check if Go was installed correctly run:

```sh
go version
```

The output should be the version installed:

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

<pre><code>
go version go{constants.golangNodeMocha} linux/amd64
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

<pre><code>
go version go{constants.golangNodeMocha} linux/arm64
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

<pre><code>
go version go{constants.golangNodeMocha} darwin/arm64
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

<pre><code>
go version go{constants.golangNodeMocha} darwin/amd64
</code></pre>

</TabItem>
</Tabs>

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

<pre><code>
ver="{constants.golangNodeArabica}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.linux-amd64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.linux-amd64.tar.gz"<br/>
rm "go$ver.linux-amd64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

<pre><code>
ver="{constants.golangNodeArabica}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.linux-arm64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.linux-arm64.tar.gz"<br/>
rm "go$ver.linux-arm64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

<pre><code>
ver="{constants.golangNodeArabica}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.darwin-arm64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.darwin-arm64.tar.gz"<br/>
rm "go$ver.darwin-arm64.tar.gz"<br/>
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

<pre><code>
ver="{constants.golangNodeArabica}"<br/>
cd $HOME<br/>
wget "https://golang.org/dl/go$ver.darwin-amd64.tar.gz"<br/>
sudo rm -rf /usr/local/go<br/>
sudo tar -C /usr/local -xzf "go$ver.darwin-amd64.tar.gz"<br/>
rm "go$ver.darwin-amd64.tar.gz"<br/>
</code></pre>

</TabItem>
</Tabs>

Now we need to add the `/usr/local/go/bin` directory to `$PATH`:

<Tabs groupId="shell">
<TabItem value="bash" label="bash">

```sh
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.bash_profile
source $HOME/.bash_profile
```

</TabItem>
<TabItem value="zsh" label="zsh">

```zsh
echo "export PATH=$PATH:/usr/local/go/bin:$HOME/go/bin" >> $HOME/.zshrc
source $HOME/.zshrc
```

</TabItem>
</Tabs>

To check if Go was installed correctly run:

```sh
go version
```

The output should be the version installed:

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

<pre><code>
go version go{constants.golangNodeArabica} linux/amd64
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

<pre><code>
go version go{constants.golangNodeArabica} linux/arm64
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

<pre><code>
go version go{constants.golangNodeArabica} darwin/arm64
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

<pre><code>
go version go{constants.golangNodeArabica} darwin/amd64
</code></pre>

</TabItem>
</Tabs>

</TabItem>
</Tabs>

````

## Celestia node

### Install Celestia Node

````mdx-code-block
<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

Installing `celestia-node` for the Blockspace Race testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{blockspaceraceVersions['node-latest-tag']}<br/>
make build<br/>
make install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {blockspaceraceVersions['node-latest-tag']}<br/>
Commit: {blockspaceraceVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: amd64/linux<br/>
Golang version: go{constants.golangNodeBSR}<br/>
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

Installing `celestia-node` for the Blockspace Race testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{blockspaceraceVersions['node-latest-tag']}<br/>
make build<br/>
make install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {blockspaceraceVersions['node-latest-tag']}<br/>
Commit: {blockspaceraceVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: arm64/linux<br/>
Golang version: go{constants.golangNodeBSR}<br/>
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

Installing `celestia-node` for the Blockspace Race testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{blockspaceraceVersions['node-latest-tag']}<br/>
make build<br/>
make go-install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {blockspaceraceVersions['node-latest-tag']}<br/>
Commit: {blockspaceraceVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: arm64/darwin<br/>
Golang version: go{constants.golangNodeBSR}<br/>
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

Installing `celestia-node` for the Blockspace Race testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{blockspaceraceVersions['node-latest-tag']}<br/>
make build<br/>
make go-install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {blockspaceraceVersions['node-latest-tag']}<br/>
Commit: {blockspaceraceVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: amd64/darwin<br/>
Golang version: go{constants.golangNodeBSR}<br/>
</code></pre>

</TabItem>
</Tabs>

</TabItem>
<TabItem value="mocha" label="Mocha">

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

Installing `celestia-node` for Mocha Testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{mochaVersions['node-latest-tag']}<br/>
make build<br/>
make install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {mochaVersions['node-latest-tag']}<br/>
Commit: {mochaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: amd64/linux<br/>
Golang version: go{constants.golangNodeMocha}<br/>
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

Installing `celestia-node` for Mocha Testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{mochaVersions['node-latest-tag']}<br/>
make build<br/>
make install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {mochaVersions['node-latest-tag']}<br/>
Commit: {mochaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: arm64/linux<br/>
Golang version: go{constants.golangNodeMocha}<br/>
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

Installing `celestia-node` for Mocha Testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{mochaVersions['node-latest-tag']}<br/>
make build<br/>
make go-install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {mochaVersions['node-latest-tag']}<br/>
Commit: {mochaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: arm64/darwin<br/>
Golang version: go{constants.golangNodeMocha}<br/>
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

Installing `celestia-node` for Mocha Testnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{mochaVersions['node-latest-tag']}<br/>
make build<br/>
make go-install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {mochaVersions['node-latest-tag']}<br/>
Commit: {mochaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: amd64/darwin<br/>
Golang version: go{constants.golangNodeMocha}<br/>
</code></pre>

</TabItem>
</Tabs>

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

<Tabs groupId="operating-systems">
<TabItem value="amd" label="Ubuntu (AMD)">

Installing `celestia-node` for Arabica Devnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{arabicaVersions['node-latest-tag']}<br/>
make build<br/>
make install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {arabicaVersions['node-latest-tag']}<br/>
Commit: {arabicaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: amd64/linux<br/>
Golang version: go{constants.golangNodeArabica}<br/>
</code></pre>

</TabItem>
<TabItem value="arm" label="Ubuntu (ARM)">

Installing `celestia-node` for Arabica Devnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{arabicaVersions['node-latest-tag']}<br/>
make build<br/>
make install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {arabicaVersions['node-latest-tag']}<br/>
Commit: {arabicaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: arm64/linux<br/>
Golang version: go{constants.golangNodeArabica}<br/>
</code></pre>

</TabItem>
<TabItem value="apple" label="Mac (Apple)">

Installing `celestia-node` for Arabica Devnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{arabicaVersions['node-latest-tag']}<br/>
make build<br/>
make go-install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {arabicaVersions['node-latest-tag']}<br/>
Commit: {arabicaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: arm64/darwin<br/>
Golang version: go{constants.golangNodeArabica}<br/>
</code></pre>

</TabItem>
<TabItem value="mac" label="Mac (Intel)">

Installing `celestia-node` for Arabica Devnet means installing a specific version
to be compatible with the network.

Install the `celestia-node` binary by running the following commands:

<pre><code>
cd $HOME<br/>
rm -rf celestia-node<br/>
git clone https://github.com/celestiaorg/celestia-node.git<br/>
cd celestia-node/<br/>
git checkout tags/{arabicaVersions['node-latest-tag']}<br/>
make build<br/>
make go-install<br/>
make cel-key<br/>
</code></pre>

Verify that the binary is working and check the version with the `celestia
version` command:

<pre><code>
$ celestia version<br/>
Semantic version: {arabicaVersions['node-latest-tag']}<br/>
Commit: {arabicaVersions['node-latest-sha']}<br/>
Build Date: Thu Dec 15 10:19:22 PM UTC 2022<br/>
System version: amd64/darwin<br/>
Golang version: go{constants.golangNodeArabica}<br/>
</code></pre>

</TabItem>
</Tabs>

</TabItem>
</Tabs>
````

### Instantiate a Celestia light node

Now, let's instantiate a Celestia Light node:

> Note: RPC Endpoints are exposed in all `celestia-node` types
  such as Light, Bridge and Full Nodes.

````mdx-code-block
<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

```sh 
celestia light init --p2p.network blockspacerace
```

</TabItem>
<TabItem value="mocha" label="Mocha">

```sh 
celestia light init
```

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

```sh
celestia light init --p2p.network arabica
```

</TabItem>
</Tabs>
````

````mdx-code-block
<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

### Connect to a public core endpoint

Let's now run the Celestia Light node with a GRPC connection to
an example public core endpoint.

> Note: You are also encouraged to find a community-run API endpoint
  and there are several in the Discord. This one is used for demonstration
  purposes. You can find a list of RPC endpoints [here](../../nodes/blockspace-race).

```sh
celestia light start --core.ip <ip-address> --gateway --gateway.addr <ip-address> --gateway.port <port> --p2p.network blockspacerace
```

:::tip
The `--core.ip` gRPC port defaults to 9090,
so if you do not specify it in the command
line, it will default to that port. You can
add the port after the IP address or use the
`--core.grpc.port` flag to specify another
port if you prefer.

Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
<TabItem value="mocha" label="Mocha">

### Connect to a public core endpoint

Let's now run the Celestia Light node with a GRPC connection to
an example public core endpoint.

> Note: You are also encouraged to find a community-run API endpoint
  and there are several in the Discord. This one is used for demonstration
  purposes. You can find a list of RPC endpoints [here](../../nodes/mocha-testnet#rpc-endpoints).

```sh
celestia light start --core.ip <ip-address> --gateway --gateway.addr <ip-address> --gateway.port <port> --p2p.network mocha
```

:::tip
The `--core.ip` gRPC port defaults to 9090,
so if you do not specify it in the command
line, it will default to that port. You can
add the port after the IP address or use the
`--core.grpc.port` flag to specify another
port if you prefer.

Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

### Connect to a public core endpoint

Let's now run the Celestia Light node with a GRPC connection to
an example public core endpoint.

> Note: You are also encouraged to find a community-run API endpoint
  and there are several in the Discord. This one is used for demonstration
  purposes. You can find a list of RPC endpoints [here](../../nodes/arabica-devnet#rpc-endpoints).

```sh
celestia light start --core.ip <ip-address> --gateway --gateway.addr <ip-address> --gateway.port <port> --p2p.network arabica
```

:::tip
The `--core.ip` gRPC port defaults to 9090,
so if you do not specify it in the command
line, it will default to that port. You can
add the port after the IP address or use the
`--core.grpc.port` flag to specify another
port if you prefer.

Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
</Tabs>

For example, your command along with an RPC endpoint might look like this:

<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

```sh
celestia light start --core.ip <ip-address> --gateway --gateway.addr 127.0.0.1 --gateway.port 26659 --p2p.network blockspacerace
```

:::tip
Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
<TabItem value="mocha" label="Mocha">

```sh
celestia light start --core.ip https://rpc-mocha.pops.one --gateway --gateway.addr 127.0.0.1 --gateway.port 26659 --p2p.network mocha
```

:::tip
Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

```sh
celestia light start --core.ip https://consensus-full-arabica-8.celestia-arabica.com/ --gateway --gateway.addr 127.0.0.1 --gateway.port 26659 --p2p.network arabica
```

:::tip
Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
</Tabs>

### Keys and wallets

You can create your key for your node by running the following command:

```sh
./cel-key add <key_name> --keyring-backend test --node.type light --p2p.network <network>
```

You can start your light node with the key created above by running the
following command:

<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

```sh
celestia light start --core.ip <ip-address> --keyring.accname <key_name> --gateway --gateway.addr <ip-address> --gateway.port <port> --p2p.network blockspacerace
```

:::tip
Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
<TabItem value="mocha" label="Mocha">

```sh
celestia light start --core.ip <ip-address> --keyring.accname <key_name> --gateway --gateway.addr <ip-address> --gateway.port <port> --p2p.network mocha
```

:::tip
Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

```sh
celestia light start --core.ip <ip-address> --keyring.accname <key_name> --gateway --gateway.addr 127.0.0.1 --gateway.port 26659 --p2p.network arabica
```

:::tip
Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

</TabItem>
</Tabs>
````

Once you start the Light Node, a wallet key will be generated for you.
You will need to fund that address with Mocha Testnet or Arabica Devnet
tokens to pay for `PayForData` transactions or `PayForBlob transactions`, respectively.

You can find the address by running the following command in
the `celestia-node` directory:

```sh
./cel-key list --node.type light --keyring-backend test --p2p.network <network>
```

If you would like to fund your wallet with testnet tokens, head over
to either the `#mocha-faucet` or `#arabica-faucet` channels on the
Celestia [Discord](https://discord.gg/celestiacommunity).

You can request funds to your wallet address using the following command in Discord:

```console
$request <Wallet-Address>
```

Where `<Wallet-Address>` is the `celestia1******` address generated
when you created the wallet.

With your wallet funded, you can move on to the next step.

## Node API calls

Open up another terminal window in order to begin querying the API.
`celestia-node` exposes its REST gateway on port `26659` by default.

:::danger Deprecation Notice
This endpoint will soon be deprecated in favor of RPC equivalent. Learn more about the RPC [here](https://node-rpc-docs.celestia.org/).
:::

### Balance

Now, let's query our node for the balance of its default account
(which is the account associated with the `developer` key we generated earlier):

```sh
curl -X GET http://127.0.0.1:26659/balance
```

It will output the following:

```json
{
   "denom":"utia",
   "amount":"999995000000000"
}
```

This shows you the balance in that wallet.

### Get block header

Now, let's get the block header information.

Here we will get the header from Block 1:

```sh
curl -X GET http://127.0.0.1:26659/header/1
```

It will output something like this:

```json
{
   "header":{
      "version":{
         "block":11
      },
      "chain_id":"devnet-2",
      "height":1,
      "time":"2021-11-23T02:24:05.965728875Z",
      "last_block_id":{
         "hash":"",
         "parts":{
            "total":0,
            "hash":""
         }
      },
      "last_commit_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "data_hash":"7B578B351B1B0BBD70BB350019EBC964C44A140A37EF715B552A7F8F315ACD19",
      "validators_hash":"7F4EA93A134DEDBDA6A1FDD30D05760DD98A2B5FBA95DB3EFFFE7FCE4B361855",
      "next_validators_hash":"7F4EA93A134DEDBDA6A1FDD30D05760DD98A2B5FBA95DB3EFFFE7FCE4B361855",
      "consensus_hash":"048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
      "app_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "last_results_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "evidence_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "proposer_address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E"
   },
   "commit":{
      "height":1,
      "round":1,
      "block_id":{
         "hash":"4632277C441CA6155C4374AC56048CF4CFE3CBB2476E07A548644435980D5E17",
         "parts":{
            "total":1,
            "hash":"BE1B789969938DB061B7723BE45C8A7B4B27192339A8E0A4E216775B2CB58D97"
         }
      },
      "signatures":[
         {
            "block_id_flag":2,
            "validator_address":"03F1044A6DF782189C7061FF89146B3D33608F17",
            "timestamp":"2021-11-23T11:53:56.123958759Z",
            "signature":"q/XF7Nc2ThcQgWfqi6LYOUEqLcU+sgVPY1nB2CLWdjRo80WwI6xy6QaYx1B0lmcKAkWR0YMxbc7vJzKF70qwBA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E",
            "timestamp":"2021-11-23T11:53:56.036027188Z",
            "signature":"0bbxeviCvgLlyIF47JoY1CMN2e/MhHtFzhdgV0zCM+P3qeO/rkh+0TSxoRVUB1MDvMCoA8hyffCw3amxympMAA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"31711F367349D1BD619BD0A39568A69614B8A048",
            "timestamp":"2021-11-23T11:53:56.135943844Z",
            "signature":"gT23rZ8+XcG5rQ9QS+uh+Wn5eAiJDVy8bh23Fb8hevnHsuO1er2892MXAohaLRF6TTWs/C6dItYph4B/k3b6DQ=="
         },
         {
            "block_id_flag":2,
            "validator_address":"5A253EC2A9AB20AFD48C7BED2AFCA53F5C80BCA6",
            "timestamp":"2021-11-23T11:53:56.081698742Z",
            "signature":"nMngIlJ7PPPtu0N20YwKhWt/H3/JrEKJC3rnS5KG/8J3IppTacuwjGDUqIuHpRlrD0MmWa1mlY+6+ulbytt2AA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"79BEB39F4B396F9278DA03F1C97F9BE3B10B12D3",
            "timestamp":"2021-11-23T11:53:56.037896319Z",
            "signature":"wPAL/sK4YXSU7iRXl00GDLvi4IItVlkY2zRkxIUeV9VA3Tq8Tke6wGE0N6pXKmtMcKUMoyjm03RWHv4mrtj1BA=="
         },
         {
            "block_id_flag":1,
            "validator_address":"",
            "timestamp":"0001-01-01T00:00:00Z",
            "signature":null
         },
         {
            "block_id_flag":1,
            "validator_address":"",
            "timestamp":"0001-01-01T00:00:00Z",
            "signature":null
         },
         {
            "block_id_flag":2,
            "validator_address":"D345D62BBD18C301B843DF7C65F10E57AB17BD98",
            "timestamp":"2021-11-23T11:53:56.123499237Z",
            "signature":"puj5Epw3yPGjSsJk6aQI74S2prgL7+cuiEpCxXYzQxOi0kNIqh8UMZLYf+AVHDQNJXehSmrAK6+VsIt9NF0DDg=="
         },
         {
            "block_id_flag":2,
            "validator_address":"DEC2642E786A941511A401090D21621E7F08A36D",
            "timestamp":"2021-11-23T11:53:56.123136439Z",
            "signature":"J/lnFqARXj42Lfx5MGY0FO/wug+AyQRxTnQp1u1HyczvV+0hXXuk06Uosi61jQKgJG6JBJF2VidqA41/uKMEDw=="
         }
      ]
   },
   "validator_set":{
      "validators":[
         {
            "address":"03F1044A6DF782189C7061FF89146B3D33608F17",
            "pub_key":"sMcFgSIzlD77eZYgV7H4akyxoHCPc2oIQW05qWEB6b4=",
            "voting_power":5000,
            "proposer_priority":-40000
         },
         {
            "address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E",
            "pub_key":"WdqZ8hoyc1HxZCJfQrAGKm2fFJZFg7PngPNGkA1RWXc=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"31711F367349D1BD619BD0A39568A69614B8A048",
            "pub_key":"pvwSRksq3ekXIiYK7IzjQJ870BxLqEma8zRr9n9VnXI=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"5A253EC2A9AB20AFD48C7BED2AFCA53F5C80BCA6",
            "pub_key":"RnmnTlKoKxNoh2TpohBDP3cKlx4ATiPOCvQFk/6xpUU=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"79BEB39F4B396F9278DA03F1C97F9BE3B10B12D3",
            "pub_key":"oh/N+GOIennBOAa/gPNCso1mDlqaHQNn7Op/X8opbeY=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"7F1105B7B219481810C49730AECB1A83036BCA3A",
            "pub_key":"Ow/AHP/Q3guPGymUKpvhnwae+QoCOpGztpVnP179IG8=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"87265CC17922E01497F40B701EC9F05373B83467",
            "pub_key":"MNi0Z+uNF5X1Bxj988IDXVl0BKUcLs7LItoMnX6dbg4=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"D345D62BBD18C301B843DF7C65F10E57AB17BD98",
            "pub_key":"4g3hhdyU4IIgWW/4sR0nax8bsC/M/fDbt1N8s/QanF8=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"DEC2642E786A941511A401090D21621E7F08A36D",
            "pub_key":"b+Vv6Lcp0bhIjOQncr+OYBHixCvU5+k34y4RqyvpluE=",
            "voting_power":5000,
            "proposer_priority":5000
         }
      ],
      "proposer":{
         "address":"03F1044A6DF782189C7061FF89146B3D33608F17",
         "pub_key":"sMcFgSIzlD77eZYgV7H4akyxoHCPc2oIQW05qWEB6b4=",
         "voting_power":5000,
         "proposer_priority":-40000
      }
   },
   "dah":{
      "row_roots":[
         "//////////7//////////uyLCVMJmAItYqbOqgHXm3OwHsq1xQiAX1kZV2Tgcobm",
         "/////////////////////ykyWNfDJZfigziZC5BN5L00KKuoyDPduwynDywauskL"
      ],
      "column_roots":[
         "//////////7//////////uyLCVMJmAItYqbOqgHXm3OwHsq1xQiAX1kZV2Tgcobm",
         "/////////////////////ykyWNfDJZfigziZC5BN5L00KKuoyDPduwynDywauskL"
      ]
   }
}
```

````mdx-code-block

<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

### Submit a PFB transaction

In this example, we will be submitting a `PayForBlob`
transaction to the node's `/submit_pfb` endpoint.

Some things to consider:

- PFB is a `PayForBlob` Message.
- The endpoint also takes in a `namespace_id` and `data` values.
- Namespace ID should be 8 bytes.
- Data is in hex-encoded bytes of the raw message.
- `gas_limit` is the limit of gas to use for the transaction

We use the following `namespace_id` of `0000010000000100` and
the `data` value of `f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5`.

You can generate your own `namespace_id` and data values using this
useful Golang Playground we created [here](https://go.dev/play/p/7ltvaj8lhRl).

:::caution
When running a Celestia node, you will need to use the following flags
when starting your node to submit a PFB:

- the `--core.ip string` flag, to allow you to submit transactions
to your node
- the `--gateway`, `--gateway.addr string`,
and `--gateway.port string`, to open the gateway
and allow anyone to use your IP as an endpoint to submit PFBs
:::

We run the following:

```sh
curl -X POST -d '{"namespace_id": "0c204d39600fddd3",
  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",
  "gas_limit": 80000, "fee": 2000}' http://localhost:26659/submit_pfb
```

We get the following output:

```json
{
  "height": 4249,
  "txhash": "B31DEA16E1F3EE13895D4A70FE808801E8BCF8381AACD5071CB51E929F17AB65",
  "codespace": "undefined",
  "code": 111222,
  "raw_log": "recovered: UnmarshalJSON cannot decode empty bytes\nstack:\ngoroutine 61 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/cosmos/cosmos-sdk/baseapp.newDefaultRecoveryMiddleware.func1({0x1f63960, 0xc00653eef0})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:71 +0x27\ngithub.com/cosmos/cosmos-sdk/baseapp.newRecoveryMiddleware.func1({0x1f63960?, 0xc00653eef0?})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:39 +0x30\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0xc0091f4580?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:28 +0x37\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0x2d32158?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:33 +0x5e\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx.func1()\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:639 +0xf0\npanic({0x1f63960, 0xc00653eef0})\n\t/usr/local/go/src/runtime/panic.go:838 +0x207\ngithub.com/cosmos/cosmos-sdk/x/params/types.Subspace.Get({{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, 0xc001099730}, {0x2d0e1c0, 0xc001099c10}, {0xc00168aba0, 0x4, 0x12}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/x/params/types/subspace.go:110 +0x307\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.GasPerBlobByte(...)\n\t/celestia-app/x/blob/keeper/params.go:36\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.PayForBlobs({{0x2d31748, 0xc001099090}, {0x2d0e170, 0xc001099ac0}, {0x2d0e170, 0x0}, {{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, ...}, ...}}, ...)\n\t/celestia-app/x/blob/keeper/keeper.go:60 +0x3a8\ngithub.com/celestiaorg/celestia-app/x/blob.NewHandler.func1({{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, {0x5f89ec0, ...}, ...}, ...}, ...)\n\t/celestia-app/x/blob/handler.go:20 +0x195\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runMsgs(_, {{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:800 +0x7a8\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx(0xc000be6e00, 0x3, {0xc0026698c0, 0x143, 0x143})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:725 +0xc45\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).DeliverTx(0xc000be6e00, {{0xc0026698c0?, 0x20?, 0xc00abfe9c0?}})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/abci.go:283 +0x17a\ngithub.com/tendermint/tendermint/abci/client.(*localClient).DeliverTxAsync(0xc000cf9320, {{0xc0026698c0?, 0x0?, 0xc000cf9320?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/abci/client/local_client.go:93 +0x105\ngithub.com/tendermint/tendermint/proxy.(*appConnConsensus).DeliverTxAsync(0xc00a464780?, {{0xc0026698c0?, 0x20?, 0xb?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/proxy/app_conn.go:88 +0x26\ngithub.com/tendermint/tendermint/state.execBlockOnProxyApp({0x2d25e10?, 0xc000d69f20}, {0x2d2ffe8, 0xc000dafdd0}, 0xc008a5ba00, {0x2d329b0, 0xc001194120}, 0x1098?)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:390 +0x822\ngithub.com/tendermint/tendermint/state.(*BlockExecutor).ApplyBlock(_, {{{0xb, 0x0}, {0xc000c8b080, 0x7}}, {0xc000c8b087, 0x9}, 0x1, 0x1098, {{0xc00a536640, ...}, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:210 +0x171\ngithub.com/tendermint/tendermint/consensus.(*State).finalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1668 +0xb2d\ngithub.com/tendermint/tendermint/consensus.(*State).tryFinalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1576 +0x2ff\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit.func1()\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1511 +0x87\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit(0xc0010dc700, 0x1099, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1549 +0xcb7\ngithub.com/tendermint/tendermint/consensus.(*State).addVote(0xc0010dc700, 0xc008e7b220, {0x0, 0x0})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:2171 +0xb7c\ngithub.com/tendermint/tendermint/consensus.(*State).tryAddVote(0xc0010dc700, 0xc008e7b220, {0x0?, 0x47b9a6?})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1963 +0x2c\ngithub.com/tendermint/tendermint/consensus.(*State).handleMsg(0xc0010dc700, {{0x2d06640?, 0xc0011f6c70?}, {0x0?, 0x0?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:853 +0x44b\ngithub.com/tendermint/tendermint/consensus.(*State).receiveRoutine(0xc0010dc700, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:780 +0x512\ncreated by github.com/tendermint/tendermint/consensus.(*State).OnStart\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:379 +0x12d\n: panic",
  "logs": null,
  "gas_wanted": 80000,
  "gas_used": 62131,
  "events": [
    {
      "type": "coin_spent",
      "attributes": [
        {
          "key": "c3BlbmRlcg==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "coin_received",
      "attributes": [
        {
          "key": "cmVjZWl2ZXI=",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "transfer",
      "attributes": [
        {
          "key": "cmVjaXBpZW50",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "message",
      "attributes": [
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "ZmVl",
          "value": "MjAwMHV0aWE=",
          "index": true
        },
        {
          "key": "ZmVlX3BheWVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "YWNjX3NlcQ==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODUvMQ==",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "c2lnbmF0dXJl",
          "value": "ZUdtRWhHNUFtYk1uUUE0MjFzdUM3RERqSE9seFBuNC81b3ZlZHB5YUI0RVpQL0RHc3NYTTEzTnUvZEVPTllBWEJ2dDFuSWpqM2JNOHZiMlEwQmhXdHc9PQ==",
          "index": true
        }
      ]
    }
  ]
}
```

If you notice from the above output, it returns a `height` of
`4249` which we will use for the next command.

Note: To learn more about status response codes, please navigate to
[cosmos code explanation](https://github.com/cosmos/cosmos-sdk/blob/main/types/errors/errors.go)

#### Troubleshooting

If you encounter an error like:

```sh
"rpc error: code = NotFound desc = account celestia1krkle0n547u0znz3unnln8paft2dq4z3rznv86 not found"
```

It is possible that the account you are trying to submit a `PayForBlob` from
doesn't have testnet tokens yet. Ensure the testnet faucet has funded your
account with tokens and then try again.

### Get namespaced shares by block height

After submitting your PFB transaction, upon success, the node will return
the block height for which the PFB transaction was included. You can then
use that block height and the namespace ID with which you submitted your
PFB transaction to get your message [shares](../node-gateway-docs#share-endpoints) returned to you. In this example,
the block height we got was 2452 which we will use for the following command.
Read more about shares in the [Celestia Specs](https://node-rpc-docs.celestia.org/#share).

```sh
curl -X GET \
  http://localhost:26659/namespaced_shares/0c204d39600fddd3/height/4249
```

Will generate the following output:

```json
{
  "shares": [
    "DCBNOWAP3dMBAAAAG/HyDKgAfpEKO/iy5h2g8mvKB+94cXpupUFl9QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
  ],
  "height": 4249
}
```

The output here is base64-encoded.

</TabItem>
<TabItem value="mocha" label="Mocha">

### Submit a PFD transaction

In this example, we will be submitting a `PayForData`
transaction to the node's `/submit_pfd` endpoint.

Some things to consider:

- PFD is a `PayForData` Message.
- The endpoint also takes in a `namespace_id` and `data` values.
- Namespace ID should be 8 bytes.
- Data is in hex-encoded bytes of the raw message.
- `gas_limit` is the limit of gas to use for the transaction

We use the following `namespace_id` of `0000010000000100` and
the `data` value of `f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5`.

You can generate your own `namespace_id` and data values using this
useful Golang Playground we created [here](https://go.dev/play/p/7ltvaj8lhRl).

:::caution
When running a Celestia node, you will need to use the following flags
when starting your node to submit a PFD:

- the `--core.ip string` flag, to allow you to submit transactions
to your node
- the `--gateway`, `--gateway.addr string`,
and `--gateway.port string`, to open the gateway
and allow anyone to use your IP as an endpoint to submit PFDs
:::
We run the following:

```sh
curl -X POST -d '{"namespace_id": "0c204d39600fddd3",
  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",
  "gas_limit": 80000, "fee": 2000}' http://localhost:26659/submit_pfd
```

We get the following output:

```json
{
   "height":2452,
   "txhash":"04A79AF9DA62FDB41ACD7D82EB0B9004AE4E4ED603B280A65816560B4F38A999",
   "data":"12200A1E2F7061796D656E742E4D7367506179466F7244617461526573706F6E7365",
   "raw_log":"[{\"msg_index\":0,\"events\":[{\"type\":\"message\",\"attributes\":[{\"key\":\"action\",\"value\":\"/payment.MsgPayForData\"}]},{\"type\":\"payfordata\",\"attributes\":[{\"key\":\"signer\",\"value\":\"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw\"},{\"key\":\"size\",\"value\":\"27\"}]}]}]",
   "logs":[
      {
         "msg_index":0,
         "events":[
            {
               "type":"message",
               "attributes":[
                  {
                     "key":"action",
                     "value":"/payment.MsgPayForData"
                  }
               ]
            },
            {
               "type":"payfordata",
               "attributes":[
                  {
                     "key":"signer",
                     "value":"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw"
                  },
                  {
                     "key":"size",
                     "value":"27"
                  }
               ]
            }
         ]
      }
   ],
   "events":[
      {
         "type":"coin_spent",
         "attributes":[
            {
               "key":"spender",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",
               "index":true
            },
            {
               "key":"amount",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"coin_received",
         "attributes":[
            {
               "key":"receiver",
               "value":"celestia17xpfvakm2amg962yls6f84z3kell8c5lpnjs3s",
               "index":true
            },
            {
               "key":"amount",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"transfer",
         "attributes":[
            {
               "key":"recipient",
               "value":"celestia17xpfvakm2amg962yls6f84z3kell8c5lpnjs3s",
               "index":true
            },
            {
               "key":"sender",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",
               "index":true
            },
            {
               "key":"amount",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"message",
         "attributes":[
            {
               "key":"sender",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"fee",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"acc_seq",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws/267",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"signature",
               "value":"JMNihnKS/MtYJDprqEFGJuXh16tVADsDDxXaFFpvv2te57btl4LbiRzwRRiN2rvwkJ2zlAApu2ImT22MZBi5+A==",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"fee",
               "value":"",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"acc_seq",
               "value":"celestia13zx48t96zauht0kpcn0kcfykc9wn8fehzcp9wq/1024",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"signature",
               "value":"mIZIjbzN0/RQAlQN7TDWzqtey3vVBPe7IO3+IIDhJstIH8QU9vsHfl0Rql9qWMZQG4dM+77w9WmUcnCeS7edfw==",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"fee",
               "value":"",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"acc_seq",
               "value":"celestia1h36gnnwzneu0csqzn2waph5y983hf3dkaznlgz/0",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"signature",
               "value":"sfy+XyP7iWU+V9q3zEIOWxbGihvhzUKRLNVeXP+a+5oRefIA/Pyqfm13A5NU9I27hhfvpqo9vhXW1waRgcI9OA==",
               "index":true
            }
         ]
      },
      {
         "type":"message",
         "attributes":[
            {
               "key":"action",
               "value":"/payment.MsgPayForData",
               "index":true
            }
         ]
      },
      {
         "type":"payfordata",
         "attributes":[
            {
               "key":"signer",
               "value":"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw",
               "index":true
            },
            {
               "key":"size",
               "value":"27",
               "index":true
            }
         ]
      }
   ]
}
```

If you notice from the above output, it returns a `height` of
`2452` which we will use for the next command.

Note: To learn more about status response codes, please navigate to
[cosmos code explanation](https://github.com/cosmos/cosmos-sdk/blob/main/types/errors/errors.go)

#### Troubleshooting

If you encounter an error like:

```sh
"rpc error: code = NotFound desc = account celestia1krkle0n547u0znz3unnln8paft2dq4z3rznv86 not found"
```

It is possible that the account you are trying to submit a `PayForData` from
doesn't have testnet tokens yet. Ensure the testnet faucet has funded your
account with tokens and then try again.

### Get namespaced shares by block height

After submitting your PFD transaction, upon success, the node will return
the block height for which the PFD transaction was included. You can then
use that block height and the namespace ID with which you submitted your
PFD transaction to get your message [shares](../node-gateway-docs#share-endpoints) returned to you. In this example,
the block height we got was 2452 which we will use for the following command.
Read more about shares in the [Celestia Specs](https://celestiaorg.github.io/celestia-specs/latest/specs/data_structures.html?highlight=shares#share).

```sh
curl -X GET \
  http://localhost:26659/namespaced_shares/0c204d39600fddd3/height/2452
```

Will generate the following output:

```json
{
   "shares":[
      "DCBNOWAP3dMb8fIMqAB+kQo7+LLmHaDya8oH73hxem6lQWX1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="
   ],
   "height":2452
}
```

The output here is base64-encoded.

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

### Submit a PFB transaction

In this example, we will be submitting a `PayForBlob`
transaction to the node's `/submit_pfb` endpoint.

Some things to consider:

- PFB is a `PayForBlob` Message.
- The endpoint also takes in a `namespace_id` and `data` values.
- Namespace ID should be 8 bytes.
- Data is in hex-encoded bytes of the raw message.
- `gas_limit` is the limit of gas to use for the transaction

We use the following `namespace_id` of `0000010000000100` and
the `data` value of `f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5`.

You can generate your own `namespace_id` and data values using this
useful Golang Playground we created [here](https://go.dev/play/p/7ltvaj8lhRl).

:::caution
When running a Celestia node, you will need to use the following flags
when starting your node to submit a PFB:

- the `--core.ip string` flag, to allow you to submit transactions
to your node
- the `--gateway`, `--gateway.addr string`,
and `--gateway.port string`, to open the gateway
and allow anyone to use your IP as an endpoint to submit PFBs
:::

We run the following:

```sh
curl -X POST -d '{"namespace_id": "0c204d39600fddd3",
  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",
  "gas_limit": 80000, "fee": 2000}' http://localhost:26659/submit_pfb
```

We get the following output:

```json
{
  "height": 4249,
  "txhash": "B31DEA16E1F3EE13895D4A70FE808801E8BCF8381AACD5071CB51E929F17AB65",
  "codespace": "undefined",
  "code": 111222,
  "raw_log": "recovered: UnmarshalJSON cannot decode empty bytes\nstack:\ngoroutine 61 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/cosmos/cosmos-sdk/baseapp.newDefaultRecoveryMiddleware.func1({0x1f63960, 0xc00653eef0})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:71 +0x27\ngithub.com/cosmos/cosmos-sdk/baseapp.newRecoveryMiddleware.func1({0x1f63960?, 0xc00653eef0?})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:39 +0x30\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0xc0091f4580?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:28 +0x37\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0x2d32158?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:33 +0x5e\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx.func1()\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:639 +0xf0\npanic({0x1f63960, 0xc00653eef0})\n\t/usr/local/go/src/runtime/panic.go:838 +0x207\ngithub.com/cosmos/cosmos-sdk/x/params/types.Subspace.Get({{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, 0xc001099730}, {0x2d0e1c0, 0xc001099c10}, {0xc00168aba0, 0x4, 0x12}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/x/params/types/subspace.go:110 +0x307\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.GasPerBlobByte(...)\n\t/celestia-app/x/blob/keeper/params.go:36\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.PayForBlobs({{0x2d31748, 0xc001099090}, {0x2d0e170, 0xc001099ac0}, {0x2d0e170, 0x0}, {{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, ...}, ...}}, ...)\n\t/celestia-app/x/blob/keeper/keeper.go:60 +0x3a8\ngithub.com/celestiaorg/celestia-app/x/blob.NewHandler.func1({{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, {0x5f89ec0, ...}, ...}, ...}, ...)\n\t/celestia-app/x/blob/handler.go:20 +0x195\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runMsgs(_, {{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:800 +0x7a8\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx(0xc000be6e00, 0x3, {0xc0026698c0, 0x143, 0x143})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:725 +0xc45\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).DeliverTx(0xc000be6e00, {{0xc0026698c0?, 0x20?, 0xc00abfe9c0?}})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/abci.go:283 +0x17a\ngithub.com/tendermint/tendermint/abci/client.(*localClient).DeliverTxAsync(0xc000cf9320, {{0xc0026698c0?, 0x0?, 0xc000cf9320?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/abci/client/local_client.go:93 +0x105\ngithub.com/tendermint/tendermint/proxy.(*appConnConsensus).DeliverTxAsync(0xc00a464780?, {{0xc0026698c0?, 0x20?, 0xb?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/proxy/app_conn.go:88 +0x26\ngithub.com/tendermint/tendermint/state.execBlockOnProxyApp({0x2d25e10?, 0xc000d69f20}, {0x2d2ffe8, 0xc000dafdd0}, 0xc008a5ba00, {0x2d329b0, 0xc001194120}, 0x1098?)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:390 +0x822\ngithub.com/tendermint/tendermint/state.(*BlockExecutor).ApplyBlock(_, {{{0xb, 0x0}, {0xc000c8b080, 0x7}}, {0xc000c8b087, 0x9}, 0x1, 0x1098, {{0xc00a536640, ...}, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:210 +0x171\ngithub.com/tendermint/tendermint/consensus.(*State).finalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1668 +0xb2d\ngithub.com/tendermint/tendermint/consensus.(*State).tryFinalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1576 +0x2ff\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit.func1()\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1511 +0x87\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit(0xc0010dc700, 0x1099, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1549 +0xcb7\ngithub.com/tendermint/tendermint/consensus.(*State).addVote(0xc0010dc700, 0xc008e7b220, {0x0, 0x0})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:2171 +0xb7c\ngithub.com/tendermint/tendermint/consensus.(*State).tryAddVote(0xc0010dc700, 0xc008e7b220, {0x0?, 0x47b9a6?})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1963 +0x2c\ngithub.com/tendermint/tendermint/consensus.(*State).handleMsg(0xc0010dc700, {{0x2d06640?, 0xc0011f6c70?}, {0x0?, 0x0?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:853 +0x44b\ngithub.com/tendermint/tendermint/consensus.(*State).receiveRoutine(0xc0010dc700, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:780 +0x512\ncreated by github.com/tendermint/tendermint/consensus.(*State).OnStart\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:379 +0x12d\n: panic",
  "logs": null,
  "gas_wanted": 80000,
  "gas_used": 62131,
  "events": [
    {
      "type": "coin_spent",
      "attributes": [
        {
          "key": "c3BlbmRlcg==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "coin_received",
      "attributes": [
        {
          "key": "cmVjZWl2ZXI=",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "transfer",
      "attributes": [
        {
          "key": "cmVjaXBpZW50",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "message",
      "attributes": [
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "ZmVl",
          "value": "MjAwMHV0aWE=",
          "index": true
        },
        {
          "key": "ZmVlX3BheWVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "YWNjX3NlcQ==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODUvMQ==",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "c2lnbmF0dXJl",
          "value": "ZUdtRWhHNUFtYk1uUUE0MjFzdUM3RERqSE9seFBuNC81b3ZlZHB5YUI0RVpQL0RHc3NYTTEzTnUvZEVPTllBWEJ2dDFuSWpqM2JNOHZiMlEwQmhXdHc9PQ==",
          "index": true
        }
      ]
    }
  ]
}
```

If you notice from the above output, it returns a `height` of
`4249` which we will use for the next command.

Note: To learn more about status response codes, please navigate to
[cosmos code explanation](https://github.com/cosmos/cosmos-sdk/blob/main/types/errors/errors.go)

#### Troubleshooting

If you encounter an error like:

```sh
"rpc error: code = NotFound desc = account celestia1krkle0n547u0znz3unnln8paft2dq4z3rznv86 not found"
```

It is possible that the account you are trying to submit a `PayForBlob` from
doesn't have testnet tokens yet. Ensure the testnet faucet has funded your
account with tokens and then try again.

### Get namespaced shares by block height

After submitting your PFB transaction, upon success, the node will return
the block height for which the PFB transaction was included. You can then
use that block height and the namespace ID with which you submitted your
PFB transaction to get your message [shares](../node-gateway-docs#share-endpoints) returned to you. In this example,
the block height we got was 2452 which we will use for the following command.
Read more about shares in the [Celestia Specs](https://node-rpc-docs.celestia.org/#share).

```sh
curl -X GET \
  http://localhost:26659/namespaced_shares/0c204d39600fddd3/height/4249
```

Will generate the following output:

```json
{
  "shares": [
    "DCBNOWAP3dMBAAAAG/HyDKgAfpEKO/iy5h2g8mvKB+94cXpupUFl9QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
  ],
  "height": 4249
}
```

The output here is base64-encoded.

</TabItem>
</Tabs>
````

{/* TODO: add this in */}
## RPC API guide â˜Žï¸

:::tip
This tutorial is made for versions of Celestia node v0.7.2 and above.
:::

This tutorial will teach you how to interact with a Celestia Node's
[RPC (Remote Procedure Call) API](https://node-rpc-docs.celestia.org/).

First, you will need to [install `celestia-node`](../../nodes/light-node) if
you have not already.

If you have not yet initalized your node, initialize it:

```bash
celestia <node_type> init --p2p.network <network>
```

Start your node if it is not yet running:

```bash
celestia <node_type> start --p2p.network <network>
```

:::tip
The `--core.ip` gRPC port defaults to 9090,
so if you do not specify it in the command
line, it will default to that port. You can
add the port after the IP address or use the
`--core.grpc.port` flag to specify another
port if you prefer.

Please refer to the [ports](../../nodes/celestia-node/#ports) section for information on
which ports are required to be open on your machine.
:::

## Celestia Node CLI guide

The Celestia Node CLI (Command Line Interface) has a `rpc` subcommand that
allows you to interact with the node's RPC API via
your terminal.

The format for the `rpc` subcommand is as follows:

```bash
celestia rpc [module] [method] [...args]
```

### Auth token

In order to interact with the API using the `rpc` subcommand,
you will need to set your authentication token.

The `--auth TOKEN` flag sets the authentication token,
otherwise it will read from the environment's
`CELESTIA_NODE_AUTH_TOKEN` variable.
If a token is not found, authentication will not be set.
And if authentication is not set, the request will fail.

To set your authentication token, you can use the
following command. Be sure to replace `<node-type>` with
the type of node and `<network>`
with the network that you are running your node on:

```bash
export CELESTIA_NODE_AUTH_TOKEN=$(celestia <node-type> auth admin --p2p.network <network>)
```

### Host URL

The `--host URL` flag sets the host address,
the default is `localhost:26658` over HTTP.

### `SubmitPayForBlob` arguments

Using the `rpc` subcommand, you can submit a blob to the network
using the `SubmitPayForBlob` method.

The arguments for `SubmitPayForBlob` are parsed specially,
to improve UX.

`SubmitPayForBlob` can be done in a few ways:

- The **namespace ID** can be encoded as either hex or base64
- The **blob** can be hex (`0x...`), base64 (`"..."`), or a normal string which will be encoded to base64 (`'"Hello There!"'`)

### Completions

If you would like to turn on completions for the Celestia Node CLI `rpc`
subcommand, you can use the following command and follow the instructions
in the CLI:

```bash
celestia completion
```

If you'd like to see the help menu for your shell, you can then run:

```bash
celestia completion [bash | fish | powershell | zsh] --help
```

### Examples

Set your auth token on a light node on Blockspace Race:

```bash
export CELESTIA_NODE_AUTH_TOKEN=$(celestia light auth admin --p2p.network blockspacerace)
```

Submit a blob to the network:

```bash
celestia rpc state SubmitPayForBlob 0x1874e642f5dde589 '"Hello there!!"' 2000 100000
```

NEW SUBMIT PFB:

Submit a blob to the network using base64:

```bash
celestia rpc blob Submit 0x0f0c204d39600fdd 0xf1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5
```


Query node information:

```bash
celestia rpc node Info
```

Get share by data availibility header and index:

```bash
celestia rpc share GetShare "$(celestia rpc header GetByHeight 162011 | jq '.result.dah' -r)" 162011 0
```

Get share by namespace:

```bash
celestia rpc share GetSharesByNamespace "$(celestia rpc header GetByHeight 162011 | jq '.result.dah' -r)" GHTmQvXd5Yk=
```

Get header by height:

```bash
celestia rpc header GetByHeight 5
```

Get data availability sampler stats:

```bash
celestia rpc das SamplingStats
```

## CLI tutorial

If you'd like to create your own SVG, post it to Celestia, and retrieve it,
you can check out the [Base64 SVG Tutorial](https://based64.xyz/).

## Golang guide

If you're interested in interacting with the node's API in Go
([`client.go`](https://github.com/celestiaorg/celestia-node/blob/main/api/rpc/client/client.go)),
you can use the [da-rpc-client-tutorial](https://github.com/renaynay/da-rpc-client-tutorial)
repo.

{/* TODO: cleanup and add this */}
## Gateway API docs

This page contains the API documentation for the `celestia-node` Gateway API.
The Gateway API is a REST API that allows you to send and receive messages
to and from the Gateway.

The Gateway API wraps methods from the JSON RPC API.

In order to query the API, you will need to setup your node. Resources on
how to do this can be found in the following [guide](../nodes/decide-node.md).

## Endpoints

### Header endpoints

#### GET `/header/{height}`

Returns the header of the given height.

Request

```sh
curl -X GET http://<ip-address>:26659/header/300
```

Response

```json
{
   "header":{
      "version":{
         "block":11
      },
      "chain_id":"devnet-2",
      "height":300,
      "time":"2021-11-23T13:13:21.208225643Z",
      "last_block_id":{
         "hash":"7BA28942BB87007324F0332BEB4B3FA57F63BB6FA424B3281D28DFB237AE1A01",
         "parts":{
            "total":1,
            "hash":"5FE2802B7A4D9A0281011401640BFC64854683168BD0FBEC04EFC8065CBE8EA0"
         }
      },
      "last_commit_hash":"82E20D9E023C5B27A71D8AC5FAB8B8BEEAFE735E880386C899D7DE24D3735102",
      "data_hash":"7B578B351B1B0BBD70BB350019EBC964C44A140A37EF715B552A7F8F315ACD19",
      "validators_hash":"7F4EA93A134DEDBDA6A1FDD30D05760DD98A2B5FBA95DB3EFFFE7FCE4B361855",
      "next_validators_hash":"7F4EA93A134DEDBDA6A1FDD30D05760DD98A2B5FBA95DB3EFFFE7FCE4B361855",
      "consensus_hash":"048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
      "app_hash":"528DBBF7330CF30BFAD76EDB1E19935D9CBD7AE522E1D4CC51A6FF0B58ABB72E",
      "last_results_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "evidence_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "proposer_address":"31711F367349D1BD619BD0A39568A69614B8A048"
   },
   "commit":{
      "height":300,
      "round":0,
      "block_id":{
         "hash":"D63D40F570E90E5757AD72DA6EB839B9B47E78AB760FFBDF0275CBC6B9A74D30",
         "parts":{
            "total":1,
            "hash":"676A9F3EA11F828E58F44C600762FD09C4DE95611FD1EF8522A3198D29B8B1C9"
         }
      },
      "signatures":[
         {
            "block_id_flag":2,
            "validator_address":"03F1044A6DF782189C7061FF89146B3D33608F17",
            "timestamp":"2021-11-23T13:13:36.603550499Z",
            "signature":"/14ReW+Ig0xf8Ew4SE2WtaCWnaWcB+RHsIosjo+uJUfANhceVVpQtCfO2wQtjtPk/JIBcoq/XcomkqsbOlYwBA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E",
            "timestamp":"2021-11-23T13:13:36.60149343Z",
            "signature":"XesoBDBgX1eJDIuVmcQIHIKqDTKZdSCMNcWjdk3xeiTgVNB5TYGlO6n7UUAZE5Gf4OZoOzqPPo847VERdWcgBQ=="
         },
         {
            "block_id_flag":2,
            "validator_address":"31711F367349D1BD619BD0A39568A69614B8A048",
            "timestamp":"2021-11-23T13:13:36.602220136Z",
            "signature":"rqpLcPFCFOOBRDB1Uxc9v+6i/GEoFMBIlJlYgFGWtWFSTu4Btr4ByyjRMo9tO9LIIlLW8guyHNS0+2i6ZcuRCg=="
         },
         {
            "block_id_flag":2,
            "validator_address":"5A253EC2A9AB20AFD48C7BED2AFCA53F5C80BCA6",
            "timestamp":"2021-11-23T13:13:36.673438724Z",
            "signature":"MofRin9HeWVw8ENHIdakr4PBN/Vsf1KeeZxFNW4KAJT6rYJKlTSCIGtfTcGgZgA5B2xyqW2aItQ+NAx/uVoPAg=="
         },
         {
            "block_id_flag":2,
            "validator_address":"79BEB39F4B396F9278DA03F1C97F9BE3B10B12D3",
            "timestamp":"2021-11-23T13:13:36.607283878Z",
            "signature":"/3VQESw+WIxWFgy9VnhSikzkr4qs36ZwSx9oweUnov7Gu/NgdnF94vm560YsObV6ZwN5h3xg7JQp1H+xgfOUCQ=="
         },
         {
            "block_id_flag":2,
            "validator_address":"7F1105B7B219481810C49730AECB1A83036BCA3A",
            "timestamp":"2021-11-23T13:13:36.644589313Z",
            "signature":"pj7uUGGZRDy2P2DsBcVUXZP50tDEpmm5bDen2B0ede8GgcNI8VjfZJKAx8ptps8TJrsThDTQdq6cx2Jj6jfuCA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"87265CC17922E01497F40B701EC9F05373B83467",
            "timestamp":"2021-11-23T13:13:36.605958421Z",
            "signature":"dWHenir11St4TAVNp/yPY+GQSBVypMRulP3wHbWIoZILMzfcirxjfTqlM+0FLtO5B8TNcrk9y9FofBJkcsB/BA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"D345D62BBD18C301B843DF7C65F10E57AB17BD98",
            "timestamp":"2021-11-23T13:13:36.609916618Z",
            "signature":"nOHLUTES3ZHJWGL5C0OW8qJR6Vhn2Ru8TQn2FHCaEnksOqtbehz/9+gZhoTndQHmpI6vQzCXHJc8GoxufYb0Aw=="
         },
         {
            "block_id_flag":2,
            "validator_address":"DEC2642E786A941511A401090D21621E7F08A36D",
            "timestamp":"2021-11-23T13:13:36.602919116Z",
            "signature":"EzKh/zkc+ghJhlkmiqldSdWDfTm4NRfZ/rT58sfAa8cNCztGm0ysCaCItTb88qJzDtB/HsdfWuvjkGezKRiACw=="
         }
      ]
   },
   "validator_set":{
      "validators":[
         {
            "address":"03F1044A6DF782189C7061FF89146B3D33608F17",
            "pub_key":"sMcFgSIzlD77eZYgV7H4akyxoHCPc2oIQW05qWEB6b4=",
            "voting_power":5000,
            "proposer_priority":-40000
         },
         {
            "address":"04881EB0A0A4C1DB414C708249CEEC2FCF348F3E",
            "pub_key":"WdqZ8hoyc1HxZCJfQrAGKm2fFJZFg7PngPNGkA1RWXc=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"31711F367349D1BD619BD0A39568A69614B8A048",
            "pub_key":"pvwSRksq3ekXIiYK7IzjQJ870BxLqEma8zRr9n9VnXI=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"5A253EC2A9AB20AFD48C7BED2AFCA53F5C80BCA6",
            "pub_key":"RnmnTlKoKxNoh2TpohBDP3cKlx4ATiPOCvQFk/6xpUU=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"79BEB39F4B396F9278DA03F1C97F9BE3B10B12D3",
            "pub_key":"oh/N+GOIennBOAa/gPNCso1mDlqaHQNn7Op/X8opbeY=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"7F1105B7B219481810C49730AECB1A83036BCA3A",
            "pub_key":"Ow/AHP/Q3guPGymUKpvhnwae+QoCOpGztpVnP179IG8=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"87265CC17922E01497F40B701EC9F05373B83467",
            "pub_key":"MNi0Z+uNF5X1Bxj988IDXVl0BKUcLs7LItoMnX6dbg4=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"D345D62BBD18C301B843DF7C65F10E57AB17BD98",
            "pub_key":"4g3hhdyU4IIgWW/4sR0nax8bsC/M/fDbt1N8s/QanF8=",
            "voting_power":5000,
            "proposer_priority":5000
         },
         {
            "address":"DEC2642E786A941511A401090D21621E7F08A36D",
            "pub_key":"b+Vv6Lcp0bhIjOQncr+OYBHixCvU5+k34y4RqyvpluE=",
            "voting_power":5000,
            "proposer_priority":5000
         }
      ],
      "proposer":{
         "address":"03F1044A6DF782189C7061FF89146B3D33608F17",
         "pub_key":"sMcFgSIzlD77eZYgV7H4akyxoHCPc2oIQW05qWEB6b4=",
         "voting_power":5000,
         "proposer_priority":-40000
      }
   },
   "dah":{
      "row_roots":[
         "//////////7//////////uyLCVMJmAItYqbOqgHXm3OwHsq1xQiAX1kZV2Tgcobm",
         "/////////////////////ykyWNfDJZfigziZC5BN5L00KKuoyDPduwynDywauskL"
      ],
      "column_roots":[
         "//////////7//////////uyLCVMJmAItYqbOqgHXm3OwHsq1xQiAX1kZV2Tgcobm",
         "/////////////////////ykyWNfDJZfigziZC5BN5L00KKuoyDPduwynDywauskL"
      ]
   }
}
```

### Share endpoints

#### GET `/namespaced_data/{nID}/height/{height}`

Returns original messages of the given namespace ID `nID` from the given block height.

Request

```sh
curl -X GET http://<ip>:26659/namespaced_data/0c204d39600fddd3/height/182038
```

Response

```json
{
   "data":[
      "8fIMqAB+kQo7+LLmHaDya8oH73hxem6lQWX1"
   ],
   "height":182038
}
```

#### GET `/namespaced_shares/{nID}`

Returns shares of the given namespace ID `nID` from the latest block (chain head).

Request

```sh
curl -X GET http://<ip>:26659/namespaced_shares/0c204d39600fddd3
```

Response

```json
{
   "shares":[
      "DCBNOWAP3dMb8fIMqAB+kQo7+LLmHaDya8oH73hxem6lQWX1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="
   ],
   "height":2452
}
```

#### GET `/namespaced_shares/{nID}/height/{height}`

Returns shares of the given namespace ID `nID` from the block of the given
height `height`.

Request

```sh
curl -X GET http://<ip-address>:26659/namespaced_shares/0c204d39600fddd3/height/2452
```

Response

```json
{
   "shares":[
      "DCBNOWAP3dMb8fIMqAB+kQo7+LLmHaDya8oH73hxem6lQWX1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="
   ],
   "height":2452
}
```

### State endpoints

#### GET `/head`

Returns the tip (head) of the node's current chain.

Request

```sh
curl -X GET http://<ip>:26659/head
```

Returns

```json
{
   "header":{
      "version":{
         "block":11,
         "app":0
      },
      "chain_id":"mocha",
      "height":32281,
      "time":"2022-06-06T14:48:57.070758938Z",
      "last_block_id":{
         "hash":"C71A7289E67D0A4C3B9C7B35DE534D9D7B1A9CA968507E08A8CCC1D2D1F2A85C",
         "parts":{
            "total":1,
            "hash":"7EF3C6168F5AD4BA4F71D38D759359745137EEE5E20B9D3BC48A8164DC9FABB7"
         }
      },
      "last_commit_hash":"2587A80B0E50C68CDADDB37646BB21A71DFA4AAE43002942880DBE609B51D3A7",
      "data_hash":"7E134D5EA9EA6EE04377765775CCBDE7848587AE832E4D37F5D6E6DB50CFAC3E",
      "validators_hash":"ABD182BE0E866A31A1381E43F87F306609463A5AA8311FF5E6D57CEA98C77FD7",
      "next_validators_hash":"ABD182BE0E866A31A1381E43F87F306609463A5AA8311FF5E6D57CEA98C77FD7",
      "consensus_hash":"048091BC7DDC283F77BFBF91D73C44DA58C3DF8A9CBC867405D8B7F3DAADA22F",
      "app_hash":"02D749BD7A79C35DD5696DA1B74194869893717C3A76AB77C10CD5326201F95E",
      "last_results_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "evidence_hash":"E3B0C44298FC1C149AFBF4C8996FB92427AE41E4649B934CA495991B7852B855",
      "proposer_address":"604377BC74F4F27274825A564761D9875B31AF05"
   },
   "commit":{
      "height":32281,
      "round":0,
      "block_id":{
         "hash":"7E43D3AC65581540DC0F795BC14025D42086492DFDE8AF3361B229B700E8D1D7",
         "parts":{
            "total":1,
            "hash":"00F3A00AC0BC5C781E683918DC890C4EDD4FB1D7E9D77C56304AB07E87EEF96C"
         }
      },
      "signatures":[
         {
            "block_id_flag":1,
            "validator_address":"",
            "timestamp":"0001-01-01T00:00:00Z",
            "signature":null
         },
         {
            "block_id_flag":2,
            "validator_address":"94692789BFAB19CEEB36689B7A509063D717DE78",
            "timestamp":"2022-06-06T14:49:23.14315697Z",
            "signature":"1hzw5xiIXmqOBv4EUtSbH8SDSnmeCvVFjJ8X5LRFiRsJfYz0xI265hYebYvMpKlSV3gd1A0gZfO3+djy4mkbDA=="
         },
         {
            "block_id_flag":2,
            "validator_address":"773E2B801BA253394B2A9963C4FE8DE03566D6D2",
            "timestamp":"2022-06-06T14:49:23.133305419Z",
            "signature":"88Nc/FcKuikZRCg4igVYoE4uJbKBHj7GQjbKi7rqSfZ5kA0am9moCglsM5sONEhF4xgjoMyA/L+xijXw9dEiBw=="
         },
         {
            "block_id_flag":2,
            "validator_address":"0B76107110A486E8767FA1997EA0C4B40B7851AF",
            "timestamp":"2022-06-06T14:49:23.152517011Z",
            "signature":"FbnZ5GYZd5n4P96lNcDZabAO5Ku4xr1/jxlFZh+4CB+rybEnXMpOhPhryiIb5r+EFOF6oPX3Po+g7chjHsh0CQ=="
         },
         {
            "block_id_flag":2,
            "validator_address":"46E301E7829AF0CF4C3C91371F6687EE0D5A9B95",
            "timestamp":"2022-06-06T14:49:23.31013935Z",
            "signature":"53mM7To7SgNCQTPK0aX8H5HeBuhOEU8fkOJBc+d16KF+8On1qD8Hh2YSxk3ATK9fhBjdsiCVIDSjkGoskEqeAw=="
         },
         {
            "block_id_flag":2,
            "validator_address":"2F192A85E9117A3C166584F8AB20B315D8788C5E",
            "timestamp":"2022-06-06T14:49:23.146908495Z",
            "signature":"jZB/C0X0Q5ovwU5Iy8xGHO79Nugs1fXCGPQcM8Z6ctxk622KPT75tk6V4F4UpmeFH8dZStI/l6uBB/ViFJITDA=="
         },
         {
            "block_id_flag":1,
            "validator_address":"",
            "timestamp":"0001-01-01T00:00:00Z",
            "signature":null
         },
         {
            "block_id_flag":2,
            "validator_address":"1DF34566F0F2781A91DF7035D0C70921CABD901E",
            "timestamp":"2022-06-06T14:49:23.141170328Z",
            "signature":"RHYPM2mcjD9/ggauNP2DDBgMPyevFzVQKT5wzlLe87JQGYF439A8nVKqvT2zi4lBX1Qj9Wb9PEcxs87FbDArCg=="
         },
...
}
```

#### GET `/data_available/{height}`

Returns whether data is available at a specific block height and the probability
that it is available based on the amount of samples collected.

Request

```sh
curl -X GET http://<ip>:26659/data_available/25000
```

Response

```json
{
  "available":true,
  "probability_of_availability":"0.9899774042423815",
}
```

#### GET `/balance`

Returns the balance of the default account address of the node.

Request

```sh
curl -X GET http://<ip>:26659/balance
```

Response

```json
{
   "denom":"utia",
   "amount":"999995000000000"
}
```

#### GET `/balance/{address}`

Returns the balance of the given address.

Request

```sh
curl -X GET http://<ip-address>:26659/balance/celes1vuw7pdcyap2u62x6dyqjdzznlg25jll6jj76d0
```

Response

```json
{
   "denom":"utia",
   "amount":"999995000000000"
}
```

#### POST `p2p.info`

This is an RPC call in order to get your node's peerId information.

To get that information, you will need to first generate an auth token:

```sh
NODE_TYPE=light
AUTH_TOKEN=$(celestia $NODE_TYPE auth admin --p2p.network blockspacerace)
```

> NOTE: You can only generate an auth token after initializing
  and starting your `celestia-node`. Also, `NODE_TYPE` here is set to
  `light` node but ensure you set it to your desired node type
  (ex. `bridge`, `full`).

The command generates an auth token that we save
to an environment variable.

Request

Then you can get the peerId of your node with the following curl
command:

```sh
curl -X POST \
     -H "Authorization: Bearer $AUTH_TOKEN" \
     -H 'Content-Type: application/json' \
     -d '{"jsonrpc":"2.0","id":0,"method":"p2p.Info","params":[]}' \
     http://localhost:26658
```

Response

```sh
{
  "jsonrpc": "2.0",
  "result": {
    "ID": "12D3KooWSHFDzY7Z7ChLC7VhZikAsjjYrXNDpvKcBKUow2oZ9fGj",
    "Addrs": [
      "/ip4/192.168.1.176/udp/2121/quic",
      "/ip4/127.0.0.1/udp/2121/quic",
      "/ip6/::1/udp/2121/quic",
      "/ip4/192.168.1.176/tcp/2121",
      "/ip6/::1/tcp/2121",
      "/ip4/81.87.20.64/udp/5619/quic"
    ]
  },
  "id": 0
}
```

The Node ID is in the `ID` value from the response.

#### POST `/submit_tx`

Submits the given transaction to a running instance of `celestia-app`.

Request

```sh
curl -X POST -d '{"gas_limit": 60000, "fee": 2000, "tx": "0A83080AFE070A1A2F7061796D656E742E4D736757697265506179466F724461746112DF070A2C63656C65733133753364376D6E757930327070397A6B337A707165706A66746A66376476727A6E6B6C333271120802020202020202021880042280040202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202020202326608101220B0429A0DB28AE163D9C1A300B320B19CEF93EC90AE87B4BA7ECF76C0703A9F891A408FA20C490F620B6A02E7FF5FA4139B997969BADE13A5E4F1A35086670FDC71550447A4759D57C844E836947F4BB73039D0E836511F3B1B8D8F1D317248DAF707326608201220B0429A0DB28AE163D9C1A300B320B19CEF93EC90AE87B4BA7ECF76C0703A9F891A408FA20C490F620B6A02E7FF5FA4139B997969BADE13A5E4F1A35086670FDC71550447A4759D57C844E836947F4BB73039D0E836511F3B1B8D8F1D317248DAF707326608401220B0429A0DB28AE163D9C1A300B320B19CEF93EC90AE87B4BA7ECF76C0703A9F891A408FA20C490F620B6A02E7FF5FA4139B997969BADE13A5E4F1A35086670FDC71550447A4759D57C844E836947F4BB73039D0E836511F3B1B8D8F1D317248DAF70732670880011220B0429A0DB28AE163D9C1A300B320B19CEF93EC90AE87B4BA7ECF76C0703A9F891A408FA20C490F620B6A02E7FF5FA4139B997969BADE13A5E4F1A35086670FDC71550447A4759D57C844E836947F4BB73039D0E836511F3B1B8D8F1D317248DAF707186312550A4E0A460A1F2F636F736D6F732E63727970746F2E736563703235366B312E5075624B657912230A210318F208E403FE5881227DD423254DA2BD4C11BAD740820B23DA352EF0E7581E6412040A020801120310904E1A405311CD1C8888C562CAA95BF4FBBD6646604D59D66FDD8E291A1C1B2C5286727464E0B3DD9E7DF38F681E0D7A2A154AED45810B6A59D351DE105D11D9383E0D44"}'\
  http://<ip-address>:26659/submit_tx
```

Response

```json
{
   "txhash":"63F2F87C2602A2F93585FB23691D17E36F9EA8F47CF50083C88941548F28B588",
   "codespace":"sdk",
   "code":30,
   "raw_log":"block height: 5361, timeout height: 99: tx timeout height",
   "logs":null,
   "gas_wanted":10000
}
```

````mdx-code-block

<Tabs groupId="network">
<TabItem value="blockspacerace" label="Blockspace Race">

#### POST `/submit_pfb`

Constructs, signs and submits a `PayForBlob` message to a running instance
of `celestia-app`. The body of the `/submit_pfb` request should contain the
hex-encoded `namespace_id`, the hex-encoded `data`, the `fee`, and the
`gas_limit` as a uint64.

Request

```sh
curl -X POST -d '{"namespace_id": "0c204d39600fddd3",
  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",
  "gas_limit": 80000, "fee": 2000}' http://localhost:26659/submit_pfb
```

Response

```json
{
  "height": 4249,
  "txhash": "B31DEA16E1F3EE13895D4A70FE808801E8BCF8381AACD5071CB51E929F17AB65",
  "codespace": "undefined",
  "code": 111222,
  "raw_log": "recovered: UnmarshalJSON cannot decode empty bytes\nstack:\ngoroutine 61 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/cosmos/cosmos-sdk/baseapp.newDefaultRecoveryMiddleware.func1({0x1f63960, 0xc00653eef0})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:71 +0x27\ngithub.com/cosmos/cosmos-sdk/baseapp.newRecoveryMiddleware.func1({0x1f63960?, 0xc00653eef0?})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:39 +0x30\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0xc0091f4580?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:28 +0x37\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0x2d32158?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:33 +0x5e\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx.func1()\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:639 +0xf0\npanic({0x1f63960, 0xc00653eef0})\n\t/usr/local/go/src/runtime/panic.go:838 +0x207\ngithub.com/cosmos/cosmos-sdk/x/params/types.Subspace.Get({{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, 0xc001099730}, {0x2d0e1c0, 0xc001099c10}, {0xc00168aba0, 0x4, 0x12}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/x/params/types/subspace.go:110 +0x307\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.GasPerBlobByte(...)\n\t/celestia-app/x/blob/keeper/params.go:36\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.PayForBlobs({{0x2d31748, 0xc001099090}, {0x2d0e170, 0xc001099ac0}, {0x2d0e170, 0x0}, {{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, ...}, ...}}, ...)\n\t/celestia-app/x/blob/keeper/keeper.go:60 +0x3a8\ngithub.com/celestiaorg/celestia-app/x/blob.NewHandler.func1({{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, {0x5f89ec0, ...}, ...}, ...}, ...)\n\t/celestia-app/x/blob/handler.go:20 +0x195\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runMsgs(_, {{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:800 +0x7a8\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx(0xc000be6e00, 0x3, {0xc0026698c0, 0x143, 0x143})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:725 +0xc45\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).DeliverTx(0xc000be6e00, {{0xc0026698c0?, 0x20?, 0xc00abfe9c0?}})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/abci.go:283 +0x17a\ngithub.com/tendermint/tendermint/abci/client.(*localClient).DeliverTxAsync(0xc000cf9320, {{0xc0026698c0?, 0x0?, 0xc000cf9320?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/abci/client/local_client.go:93 +0x105\ngithub.com/tendermint/tendermint/proxy.(*appConnConsensus).DeliverTxAsync(0xc00a464780?, {{0xc0026698c0?, 0x20?, 0xb?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/proxy/app_conn.go:88 +0x26\ngithub.com/tendermint/tendermint/state.execBlockOnProxyApp({0x2d25e10?, 0xc000d69f20}, {0x2d2ffe8, 0xc000dafdd0}, 0xc008a5ba00, {0x2d329b0, 0xc001194120}, 0x1098?)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:390 +0x822\ngithub.com/tendermint/tendermint/state.(*BlockExecutor).ApplyBlock(_, {{{0xb, 0x0}, {0xc000c8b080, 0x7}}, {0xc000c8b087, 0x9}, 0x1, 0x1098, {{0xc00a536640, ...}, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:210 +0x171\ngithub.com/tendermint/tendermint/consensus.(*State).finalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1668 +0xb2d\ngithub.com/tendermint/tendermint/consensus.(*State).tryFinalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1576 +0x2ff\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit.func1()\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1511 +0x87\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit(0xc0010dc700, 0x1099, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1549 +0xcb7\ngithub.com/tendermint/tendermint/consensus.(*State).addVote(0xc0010dc700, 0xc008e7b220, {0x0, 0x0})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:2171 +0xb7c\ngithub.com/tendermint/tendermint/consensus.(*State).tryAddVote(0xc0010dc700, 0xc008e7b220, {0x0?, 0x47b9a6?})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1963 +0x2c\ngithub.com/tendermint/tendermint/consensus.(*State).handleMsg(0xc0010dc700, {{0x2d06640?, 0xc0011f6c70?}, {0x0?, 0x0?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:853 +0x44b\ngithub.com/tendermint/tendermint/consensus.(*State).receiveRoutine(0xc0010dc700, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:780 +0x512\ncreated by github.com/tendermint/tendermint/consensus.(*State).OnStart\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:379 +0x12d\n: panic",
  "logs": null,
  "gas_wanted": 80000,
  "gas_used": 62131,
  "events": [
    {
      "type": "coin_spent",
      "attributes": [
        {
          "key": "c3BlbmRlcg==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "coin_received",
      "attributes": [
        {
          "key": "cmVjZWl2ZXI=",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "transfer",
      "attributes": [
        {
          "key": "cmVjaXBpZW50",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "message",
      "attributes": [
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "ZmVl",
          "value": "MjAwMHV0aWE=",
          "index": true
        },
        {
          "key": "ZmVlX3BheWVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "YWNjX3NlcQ==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODUvMQ==",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "c2lnbmF0dXJl",
          "value": "ZUdtRWhHNUFtYk1uUUE0MjFzdUM3RERqSE9seFBuNC81b3ZlZHB5YUI0RVpQL0RHc3NYTTEzTnUvZEVPTllBWEJ2dDFuSWpqM2JNOHZiMlEwQmhXdHc9PQ==",
          "index": true
        }
      ]
    }
  ]
}
```

</TabItem>
<TabItem value="mocha" label="Mocha">

#### POST `/submit_pfd`

Constructs, signs and submits a `PayForData` message to a running instance
of celestia-app. The body of the `/submit_pfd` request should contain the
hex-encoded `namespace_id`, the hex-encoded `data`, the `fee`, and the
`gas_limit` as a uint64.

Request

```sh
curl -X POST -d '{"namespace_id": "0c204d39600fddd3",
  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",
  "gas_limit": 80000, "fee": 2000}' http://localhost:26659/submit_pfd
```

Response

```json
{
   "height":2452,
   "txhash":"04A79AF9DA62FDB41ACD7D82EB0B9004AE4E4ED603B280A65816560B4F38A999",
   "data":"12200A1E2F7061796D656E742E4D7367506179466F7244617461526573706F6E7365",
   "raw_log":"[{\"msg_index\":0,\"events\":[{\"type\":\"message\",\"attributes\":[{\"key\":\"action\",\"value\":\"/payment.MsgPayForData\"}]},{\"type\":\"payfordata\",\"attributes\":[{\"key\":\"signer\",\"value\":\"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw\"},{\"key\":\"size\",\"value\":\"27\"}]}]}]",
   "logs":[
      {
         "msg_index":0,
         "events":[
            {
               "type":"message",
               "attributes":[
                  {
                     "key":"action",
                     "value":"/payment.MsgPayForData"
                  }
               ]
            },
            {
               "type":"payfordata",
               "attributes":[
                  {
                     "key":"signer",
                     "value":"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw"
                  },
                  {
                     "key":"size",
                     "value":"27"
                  }
               ]
            }
         ]
      }
   ],
   "events":[
      {
         "type":"coin_spent",
         "attributes":[
            {
               "key":"spender",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",
               "index":true
            },
            {
               "key":"amount",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"coin_received",
         "attributes":[
            {
               "key":"receiver",
               "value":"celestia17xpfvakm2amg962yls6f84z3kell8c5lpnjs3s",
               "index":true
            },
            {
               "key":"amount",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"transfer",
         "attributes":[
            {
               "key":"recipient",
               "value":"celestia17xpfvakm2amg962yls6f84z3kell8c5lpnjs3s",
               "index":true
            },
            {
               "key":"sender",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",
               "index":true
            },
            {
               "key":"amount",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"message",
         "attributes":[
            {
               "key":"sender",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"fee",
               "value":"1utia",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"acc_seq",
               "value":"celestia10jhckjxxymsufflglvypxscnmggetwh0gfasws/267",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"signature",
               "value":"JMNihnKS/MtYJDprqEFGJuXh16tVADsDDxXaFFpvv2te57btl4LbiRzwRRiN2rvwkJ2zlAApu2ImT22MZBi5+A==",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"fee",
               "value":"",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"acc_seq",
               "value":"celestia13zx48t96zauht0kpcn0kcfykc9wn8fehzcp9wq/1024",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"signature",
               "value":"mIZIjbzN0/RQAlQN7TDWzqtey3vVBPe7IO3+IIDhJstIH8QU9vsHfl0Rql9qWMZQG4dM+77w9WmUcnCeS7edfw==",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"fee",
               "value":"",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"acc_seq",
               "value":"celestia1h36gnnwzneu0csqzn2waph5y983hf3dkaznlgz/0",
               "index":true
            }
         ]
      },
      {
         "type":"tx",
         "attributes":[
            {
               "key":"signature",
               "value":"sfy+XyP7iWU+V9q3zEIOWxbGihvhzUKRLNVeXP+a+5oRefIA/Pyqfm13A5NU9I27hhfvpqo9vhXW1waRgcI9OA==",
               "index":true
            }
         ]
      },
      {
         "type":"message",
         "attributes":[
            {
               "key":"action",
               "value":"/payment.MsgPayForData",
               "index":true
            }
         ]
      },
      {
         "type":"payfordata",
         "attributes":[
            {
               "key":"signer",
               "value":"celestia1vdjkcetnw35kzvtgxvmxwmnwwaaxuet4xp3hxut6dce8wctsdq6hjwfcxd5xvvmyddsh5mnvvaaq6776xw",
               "index":true
            },
            {
               "key":"size",
               "value":"27",
               "index":true
            }
         ]
      }
   ]
}
```

</TabItem>
<TabItem value="arabica" label="Arabica ðŸ—ï¸">

#### POST `/submit_pfb`

Constructs, signs and submits a `PayForBlob` message to a running instance
of celestia-app. The body of the `/submit_pfb` request should contain the
hex-encoded `namespace_id`, the hex-encoded `data`, the `fee`, and the
`gas_limit` as a uint64.

Request

```sh
curl -X POST -d '{"namespace_id": "0c204d39600fddd3",
  "data": "f1f20ca8007e910a3bf8b2e61da0f26bca07ef78717a6ea54165f5",
  "gas_limit": 80000, "fee": 2000}' http://localhost:26659/submit_pfb
```

Response

```json
{
  "height": 4249,
  "txhash": "B31DEA16E1F3EE13895D4A70FE808801E8BCF8381AACD5071CB51E929F17AB65",
  "codespace": "undefined",
  "code": 111222,
  "raw_log": "recovered: UnmarshalJSON cannot decode empty bytes\nstack:\ngoroutine 61 [running]:\nruntime/debug.Stack()\n\t/usr/local/go/src/runtime/debug/stack.go:24 +0x65\ngithub.com/cosmos/cosmos-sdk/baseapp.newDefaultRecoveryMiddleware.func1({0x1f63960, 0xc00653eef0})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:71 +0x27\ngithub.com/cosmos/cosmos-sdk/baseapp.newRecoveryMiddleware.func1({0x1f63960?, 0xc00653eef0?})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:39 +0x30\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0xc0091f4580?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:28 +0x37\ngithub.com/cosmos/cosmos-sdk/baseapp.processRecovery({0x1f63960, 0xc00653eef0}, 0x2d32158?)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/recovery.go:33 +0x5e\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx.func1()\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:639 +0xf0\npanic({0x1f63960, 0xc00653eef0})\n\t/usr/local/go/src/runtime/panic.go:838 +0x207\ngithub.com/cosmos/cosmos-sdk/x/params/types.Subspace.Get({{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, 0xc001099730}, {0x2d0e1c0, 0xc001099c10}, {0xc00168aba0, 0x4, 0x12}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/x/params/types/subspace.go:110 +0x307\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.GasPerBlobByte(...)\n\t/celestia-app/x/blob/keeper/params.go:36\ngithub.com/celestiaorg/celestia-app/x/blob/keeper.Keeper.PayForBlobs({{0x2d31748, 0xc001099090}, {0x2d0e170, 0xc001099ac0}, {0x2d0e170, 0x0}, {{0x2d31748, 0xc001099090}, 0xc0004ee198, {0x2d0e170, ...}, ...}}, ...)\n\t/celestia-app/x/blob/keeper/keeper.go:60 +0x3a8\ngithub.com/celestiaorg/celestia-app/x/blob.NewHandler.func1({{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, {0x5f89ec0, ...}, ...}, ...}, ...)\n\t/celestia-app/x/blob/handler.go:20 +0x195\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runMsgs(_, {{0x2d24c58, 0xc000138020}, {0x2d32158, 0xc00acc0680}, {{0xb, 0x0}, {0xc0067752e0, 0x9}, 0x1099, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:800 +0x7a8\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).runTx(0xc000be6e00, 0x3, {0xc0026698c0, 0x143, 0x143})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/baseapp.go:725 +0xc45\ngithub.com/cosmos/cosmos-sdk/baseapp.(*BaseApp).DeliverTx(0xc000be6e00, {{0xc0026698c0?, 0x20?, 0xc00abfe9c0?}})\n\t/go/pkg/mod/github.com/celestiaorg/cosmos-sdk@v1.8.0-sdk-0.46.7/baseapp/abci.go:283 +0x17a\ngithub.com/tendermint/tendermint/abci/client.(*localClient).DeliverTxAsync(0xc000cf9320, {{0xc0026698c0?, 0x0?, 0xc000cf9320?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/abci/client/local_client.go:93 +0x105\ngithub.com/tendermint/tendermint/proxy.(*appConnConsensus).DeliverTxAsync(0xc00a464780?, {{0xc0026698c0?, 0x20?, 0xb?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/proxy/app_conn.go:88 +0x26\ngithub.com/tendermint/tendermint/state.execBlockOnProxyApp({0x2d25e10?, 0xc000d69f20}, {0x2d2ffe8, 0xc000dafdd0}, 0xc008a5ba00, {0x2d329b0, 0xc001194120}, 0x1098?)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:390 +0x822\ngithub.com/tendermint/tendermint/state.(*BlockExecutor).ApplyBlock(_, {{{0xb, 0x0}, {0xc000c8b080, 0x7}}, {0xc000c8b087, 0x9}, 0x1, 0x1098, {{0xc00a536640, ...}, ...}, ...}, ...)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/state/execution.go:210 +0x171\ngithub.com/tendermint/tendermint/consensus.(*State).finalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1668 +0xb2d\ngithub.com/tendermint/tendermint/consensus.(*State).tryFinalizeCommit(0xc0010dc700, 0x1099)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1576 +0x2ff\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit.func1()\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1511 +0x87\ngithub.com/tendermint/tendermint/consensus.(*State).enterCommit(0xc0010dc700, 0x1099, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1549 +0xcb7\ngithub.com/tendermint/tendermint/consensus.(*State).addVote(0xc0010dc700, 0xc008e7b220, {0x0, 0x0})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:2171 +0xb7c\ngithub.com/tendermint/tendermint/consensus.(*State).tryAddVote(0xc0010dc700, 0xc008e7b220, {0x0?, 0x47b9a6?})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:1963 +0x2c\ngithub.com/tendermint/tendermint/consensus.(*State).handleMsg(0xc0010dc700, {{0x2d06640?, 0xc0011f6c70?}, {0x0?, 0x0?}})\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:853 +0x44b\ngithub.com/tendermint/tendermint/consensus.(*State).receiveRoutine(0xc0010dc700, 0x0)\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:780 +0x512\ncreated by github.com/tendermint/tendermint/consensus.(*State).OnStart\n\t/go/pkg/mod/github.com/celestiaorg/celestia-core@v1.14.0-tm-v0.34.23/consensus/state.go:379 +0x12d\n: panic",
  "logs": null,
  "gas_wanted": 80000,
  "gas_used": 62131,
  "events": [
    {
      "type": "coin_spent",
      "attributes": [
        {
          "key": "c3BlbmRlcg==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "coin_received",
      "attributes": [
        {
          "key": "cmVjZWl2ZXI=",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "transfer",
      "attributes": [
        {
          "key": "cmVjaXBpZW50",
          "value": "Y2VsZXN0aWExN3hwZnZha20yYW1nOTYyeWxzNmY4NHoza2VsbDhjNWxwbmpzM3M=",
          "index": true
        },
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        },
        {
          "key": "YW1vdW50",
          "value": "MjAwMHV0aWE=",
          "index": true
        }
      ]
    },
    {
      "type": "message",
      "attributes": [
        {
          "key": "c2VuZGVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "ZmVl",
          "value": "MjAwMHV0aWE=",
          "index": true
        },
        {
          "key": "ZmVlX3BheWVy",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODU=",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "YWNjX3NlcQ==",
          "value": "Y2VsZXN0aWExOG1lbHFkNmV0eXZ5aDZ3M3BkMDZkODRleXA5cHU1c2xuN2h5ODUvMQ==",
          "index": true
        }
      ]
    },
    {
      "type": "tx",
      "attributes": [
        {
          "key": "c2lnbmF0dXJl",
          "value": "ZUdtRWhHNUFtYk1uUUE0MjFzdUM3RERqSE9seFBuNC81b3ZlZHB5YUI0RVpQL0RHc3NYTTEzTnUvZEVPTllBWEJ2dDFuSWpqM2JNOHZiMlEwQmhXdHc9PQ==",
          "index": true
        }
      ]
    }
  ]
}
```

</TabItem>
</Tabs>
````
