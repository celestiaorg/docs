1:"$Sreact.fragment"
2:I[27603,["2545","static/chunks/c16f53c3-775488a13e945d5a.js","527","static/chunks/527-f7ee51f6296d0f68.js","8547","static/chunks/app/build/stacks/nitro-das-server/page-a2fdc3e2bd7bd884.js"],"WrapperWithFooter"]
4:I[90721,["2545","static/chunks/c16f53c3-775488a13e945d5a.js","527","static/chunks/527-f7ee51f6296d0f68.js","8547","static/chunks/app/build/stacks/nitro-das-server/page-a2fdc3e2bd7bd884.js"],"HeadingAnchor"]
d:I[90484,[],"OutletBoundary"]
e:"$Sreact.suspense"
3:T6f7,# Arbitrum Nitro with Celestia DA

## Overview

The Arbitrum Nitro integration with Celestia enables Orbit chains to use Celestia for data availability instead of Arbitrum AnyTrust. The implementation uses a sidecar architecture where a separate `celestia-server` handles Celestia-specific operations via RPC.

## How it works

Nitro's batch poster coordinates with the Celestia DAS server to store batch data:

1. **Batch posting**: The [`MaybePostSequencerBatch`](https://github.com/celestiaorg/nitro/blob/v3.6.8/arbnode/batch_poster.go#L1675) method checks if a DAS writer is configured and acquires a lock before posting
2. **Data storage**: The DAS writer calls the Celestia server's [`Store`](https://github.com/celestiaorg/nitro-das-celestia/blob/main/daserver/celestia.go#L302) method, which:
   - Creates a blob from the batch data
   - Submits it to Celestia with retry logic and gas price adjustment
   - Returns a `BlobPointer` containing block height, share indices, and data commitments
3. **Verification**: During disputes, Blobstream (default: SP1 Blobstream) confirms batch availability on Celestia, supporting fraud proofs through the hash oracle trick

## Key features

- **Sidecar architecture**: Processing logic handled by separate `celestia-server`, keeping Nitro nodes lightweight
- **Fallback support**: Native fallback mechanism with configurable `da-preference` parameter (e.g., `["celestia", "anytrust"]`)
- **Preimage oracle**: Validators populate preimage mappings with Celestia hashes for fraud proof support
- **Robust submission**: Automatic retry with gas price adjustment for network congestion

## Resources

- [Nitro fork repository](https://github.com/celestiaorg/nitro)
- [Celestia DAS server](https://github.com/celestiaorg/nitro-das-celestia)0:{"buildId":"5DiMonWrxPT_SwxSvZouq","rsc":["$","$1","c",{"children":[["$","$L2",null,{"metadata":{"title":"Arbitrum Nitro with Celestia DA","filePath":"app/build/stacks/nitro-das-server/page.mdx","timestamp":1772147596000},"toc":[{"value":"Overview","id":"overview","depth":2},{"value":"How it works","id":"how-it-works","depth":2},{"value":"Key features","id":"key-features","depth":2},{"value":"Resources","id":"resources","depth":2}],"sourceCode":"$3","children":[["$","h1",null,{"className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-bold x:mt-2 x:text-4xl","children":["Arbitrum Nitro with Celestia DA","$undefined"]}],"\n",["$","h2",null,{"id":"overview","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["Overview",["$","$L4",null,{"id":"overview"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":["The Arbitrum Nitro integration with Celestia enables Orbit chains to use Celestia for data availability instead of Arbitrum AnyTrust. The implementation uses a sidecar architecture where a separate ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"celestia-server"}]," handles Celestia-specific operations via RPC."]}],"\n",["$","h2",null,{"id":"how-it-works","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["How it works",["$","$L4",null,{"id":"how-it-works"}]]}],"\n",["$","p",null,{"className":"x:not-first:mt-[1.25em] x:leading-7","children":"Nitro’s batch poster coordinates with the Celestia DAS server to store batch data:"}],"\n",["$","ol",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-decimal x:ms-6","children":["\n","$L5","\n","$L6","\n","$L7","\n"]}],"\n","$L8","\n","$L9","\n","$La","\n","$Lb"]}],null,"$Lc"]}],"loading":null,"isPartial":false}
5:["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Batch posting"}],": The ",["$","a",null,{"href":"https://github.com/celestiaorg/nitro/blob/v3.6.8/arbnode/batch_poster.go#L1675","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"MaybePostSequencerBatch"}],false]}]," method checks if a DAS writer is configured and acquires a lock before posting"]}]
6:["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Data storage"}],": The DAS writer calls the Celestia server’s ",["$","a",null,{"href":"https://github.com/celestiaorg/nitro-das-celestia/blob/main/daserver/celestia.go#L302","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":[["$","code",null,{"className":"nextra-code","dir":"ltr","children":"Store"}],false]}]," method, which:","\n",["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":"Creates a blob from the batch data"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":"Submits it to Celestia with retry logic and gas price adjustment"}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["Returns a ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"BlobPointer"}]," containing block height, share indices, and data commitments"]}],"\n"]}],"\n"]}]
7:["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Verification"}],": During disputes, Blobstream (default: SP1 Blobstream) confirms batch availability on Celestia, supporting fraud proofs through the hash oracle trick"]}]
8:["$","h2",null,{"id":"key-features","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["Key features",["$","$L4",null,{"id":"key-features"}]]}]
9:["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Sidecar architecture"}],": Processing logic handled by separate ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"celestia-server"}],", keeping Nitro nodes lightweight"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Fallback support"}],": Native fallback mechanism with configurable ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"da-preference"}]," parameter (e.g., ",["$","code",null,{"className":"nextra-code","dir":"ltr","children":"[\"celestia\", \"anytrust\"]"}],")"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Preimage oracle"}],": Validators populate preimage mappings with Celestia hashes for fraud proof support"]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":[["$","strong",null,{"children":"Robust submission"}],": Automatic retry with gas price adjustment for network congestion"]}],"\n"]}]
a:["$","h2",null,{"id":"resources","className":"x:tracking-tight x:text-slate-900 x:dark:text-slate-100 x:font-semibold x:target:animate-[fade-in_1.5s] x:mt-10 x:border-b x:pb-1 x:text-3xl nextra-border","children":["Resources",["$","$L4",null,{"id":"resources"}]]}]
b:["$","ul",null,{"className":"x:[:is(ol,ul)_&]:my-[.75em] x:not-first:mt-[1.25em] x:list-disc x:ms-[1.5em]","children":["\n",["$","li",null,{"className":"x:my-[.5em]","children":["$","a",null,{"href":"https://github.com/celestiaorg/nitro","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["Nitro fork repository",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}]}],"\n",["$","li",null,{"className":"x:my-[.5em]","children":["$","a",null,{"href":"https://github.com/celestiaorg/nitro-das-celestia","target":"_blank","rel":"noreferrer","className":"x:focus-visible:nextra-focus x:text-primary-600 x:underline x:hover:no-underline x:decoration-from-font x:[text-underline-position:from-font]","children":["Celestia DAS server",[" ",["$","svg",null,{"fill":"none","stroke":"currentColor","strokeLinecap":"round","strokeLinejoin":"round","strokeWidth":1.7,"viewBox":"0 0 24 24","height":"1em","className":"x:inline x:align-baseline x:shrink-0","children":[["$","path",null,{"d":"M7 17L17 7"}],["$","path",null,{"d":"M7 7h10v10"}]]}]]]}]}],"\n"]}]
c:["$","$Ld",null,{"children":["$","$e",null,{"name":"Next.MetadataOutlet","children":"$@f"}]}]
f:null
